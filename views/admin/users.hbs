<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

<h1>餐廳後台</h1>

<a href='/admin/restaurants'>Restaurants</a> |
<a href='/admin/categories'>Categories</a> |
<a href='/admin/users'>Users</a>

<table class="table mt-3">
  <thead class="table-light">
    <tr>
      <th scope="col">#</th>
      <th scope="col">Name</th>
      <th scope="col">Email</th>
      <th scope="col">Role</th>
      <th scope="col">Set as Admin</th>
    </tr>
  </thead>
  <tbody>
    {{#each users}}
    <tr>
      <th scope="row">{{this.id}}</th>
      <td>{{this.name}}</td>
      <td>{{this.email}}</td>
      <td>{{#ifCond this.isAdmin 1}}Admin{{else}}User{{/ifCond}}</td>
      <td>

        {{!-- <form action="/admin/users/{{this.id}}/toggleAdmin?_method=PUT" method="POST" style="display: inline;">
          <button type="submit" class="btn btn-link">Set as user</button> --}}

          {{!-- if isAdmin 等於 1 ，就代表是管理員 checked --}}
        {{!-- </form> --}}

        <form action="/admin/users/{{this.id}}/toggleAdmin?_method=PUT" method="POST" style="display: inline;">
          <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" name="toggleAdmin" id="toggleAdmin" {{#if
              this.isAdmin}}checked{{/if}} onclick="form.submit()">
            <label class="form-check-label" for="toggleAdmin"></label>
          </div>
        </form>

      </td>
    </tr>
    {{/each}}
  </tbody>
</table>


{{!-- <script>
  function submit() {
    form.submit()
}
</script> --}}